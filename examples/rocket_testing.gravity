# Two-stage-like ascent tuning scenario
rocket Rocket at [0,6371000,0][m] mass 30000[kg] radius 3[m] velocity [0,0,0][m/s]
sphere Earth at [0,0,0][m] mass 5.972e24[kg] radius 6371000[m] fixed
probe Stage1 at [0,6371000,0][m] mass 6000[kg] radius 2[m] velocity [0,0,0][m/s] fixed

grav all

Rocket.dry_mass = 12000[kg]
Rocket.fuel_mass = 18000[kg]
Rocket.burn_rate = 210[kg/s]
Rocket.max_thrust = 8.5e5[N]
Rocket.isp_sea_level = 282[s]
Rocket.isp_vacuum = 335[s]
Rocket.drag_coefficient = 0.27
Rocket.cross_section = 7[m2]
Rocket.throttle = 1.0
throttle Rocket to maintain velocity 2200[m/s]
gravity_turn Rocket start 2[km] end 120[km] final_pitch 89

merge_heat 0.3
event step 150 detach Stage1 from Rocket

dump_all to "artifacts/rocket_dump.csv" frequency 20
plot on body Rocket
verbose on
simulate orbit in 0..900 dt 1[s] integrator rk45 {
}
